<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Deployster Alert</title>
    <style>
      /* MEDIA QUERIES: strictly for mobile clients */
      @media only screen and (max-width: 600px) {
        .container {
          width: 100% !important;
          padding: 0 !important;
        }
        .content-padding {
          padding: 15px !important;
        }
        .metric-table {
          width: 100% !important;
          display: block !important;
        }
        .metric-cell {
          width: 100% !important;
          display: block !important;
          margin-bottom: 15px !important;
        }
        .spacer-cell {
          display: none !important;
        }
        .button-stack {
          width: 100% !important;
          display: block !important;
          margin-bottom: 10px !important;
        }
      }
    </style>
  </head>
  <body
    style="
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f4f7;
      margin: 0;
      padding: 0;
      -webkit-text-size-adjust: none;
    "
  >
    <table
      width="100%"
      cellpadding="0"
      cellspacing="0"
      border="0"
      style="background-color: #f4f4f7; padding: 20px"
    >
      <tr>
        <td align="center">
          <table
            class="container"
            width="600"
            cellpadding="0"
            cellspacing="0"
            border="0"
            style="
              background-color: #ffffff;
              width: 600px;
              max-width: 600px;
              border-radius: 8px;
              overflow: hidden;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            "
          >
            <tr>
              <td
                style="
                  background-color: #d9534f;
                  padding: 25px;
                  text-align: center;
                "
              >
                <h1
                  style="
                    color: #ffffff;
                    margin: 0;
                    font-size: 24px;
                    font-weight: 600;
                    letter-spacing: 0.5px;
                    font-family: Helvetica, Arial, sans-serif;
                  "
                >
                  ðŸš¨ High Resource Alert
                </h1>
                <p
                  style="
                    color: #ffffff;
                    margin: 5px 0 0 0;
                    opacity: 0.9;
                    font-size: 14px;
                    font-family: Helvetica, Arial, sans-serif;
                  "
                >
                  {{deploysterPublicIp}}
                </p>
              </td>
            </tr>

            <tr>
              <td class="content-padding" style="padding: 30px">
                <p
                  style="
                    color: #555555;
                    font-size: 16px;
                    margin-top: 0;
                    margin-bottom: 25px;
                    line-height: 1.5;
                    font-family: Helvetica, Arial, sans-serif;
                  "
                >
                  Hello <strong>Admin</strong>,<br />
                  Deployster detected usage exceeding your configured
                  thresholds.
                </p>

                <table
                  width="100%"
                  cellpadding="0"
                  cellspacing="0"
                  border="0"
                  style="margin-bottom: 25px"
                >
                  <tr>
                    <td
                      class="metric-cell"
                      width="260"
                      valign="top"
                      style="
                        border: 1px solid #eeeeee;
                        border-radius: 6px;
                        padding: 15px;
                        background-color: #fafafa;
                      "
                    >
                      <div
                        style="
                          font-size: 11px;
                          color: #777;
                          text-transform: uppercase;
                          font-weight: bold;
                          margin-bottom: 5px;
                          font-family: Helvetica, Arial, sans-serif;
                        "
                      >
                        CPU Load
                      </div>
                      <div
                        style="
                          font-size: 24px;
                          color: #333;
                          font-weight: bold;
                          margin-bottom: 10px;
                          font-family: Helvetica, Arial, sans-serif;
                        "
                      >
                        {{cpuLoad}}%
                      </div>
                      <table
                        width="100%"
                        cellpadding="0"
                        cellspacing="0"
                        height="6"
                        style="background-color: #e0e0e0; border-radius: 3px"
                      >
                        <tr>
                          <td
                            width="{{cpuLoad}}%"
                            style="
                              background-color: #d9534f;
                              border-radius: 3px;
                              height: 6px;
                              font-size: 0;
                              line-height: 0;
                            "
                          >
                            &nbsp;
                          </td>
                          <td width="auto" style="font-size: 0; line-height: 0">
                            &nbsp;
                          </td>
                        </tr>
                      </table>
                    </td>
                    <td class="spacer-cell" width="20" style="font-size: 0">
                      &nbsp;
                    </td>
                    <td
                      class="metric-cell"
                      width="260"
                      valign="top"
                      style="
                        border: 1px solid #eeeeee;
                        border-radius: 6px;
                        padding: 15px;
                        background-color: #fafafa;
                      "
                    >
                      <div
                        style="
                          font-size: 11px;
                          color: #777;
                          text-transform: uppercase;
                          font-weight: bold;
                          margin-bottom: 5px;
                          font-family: Helvetica, Arial, sans-serif;
                        "
                      >
                        Memory
                      </div>
                      <div
                        style="
                          font-size: 24px;
                          color: #333;
                          font-weight: bold;
                          margin-bottom: 10px;
                          font-family: Helvetica, Arial, sans-serif;
                        "
                      >
                        {{ramUsage}}%
                      </div>
                      <table
                        width="100%"
                        cellpadding="0"
                        cellspacing="0"
                        height="6"
                        style="background-color: #e0e0e0; border-radius: 3px"
                      >
                        <tr>
                          <td
                            width="{{ramUsage}}%"
                            style="
                              background-color: #f0ad4e;
                              border-radius: 3px;
                              height: 6px;
                              font-size: 0;
                              line-height: 0;
                            "
                          >
                            &nbsp;
                          </td>
                          <td width="auto" style="font-size: 0; line-height: 0">
                            &nbsp;
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>

                <p
                  style="
                    color: #333;
                    font-size: 14px;
                    font-weight: bold;
                    margin-bottom: 10px;
                    font-family: Helvetica, Arial, sans-serif;
                  "
                >
                  Top Consumers:
                </p>
                <table
                  width="100%"
                  cellpadding="10"
                  cellspacing="0"
                  border="0"
                  style="
                    border: 1px solid #e0e0e0;
                    border-radius: 6px;
                    overflow: hidden;
                    font-family: 'Courier New', Courier, monospace;
                    font-size: 13px;
                    margin-bottom: 25px;
                  "
                >
                 <tr style="background-color: #f8f9fa">
                    <th
                      align="left"
                      style="color: #555; border-bottom: 1px solid #e0e0e0"
                    >
                      PID/Process
                    </th>
                    <th
                      align="right"
                      style="color: #555; border-bottom: 1px solid #e0e0e0"
                    >
                      MEM (%)
                    </th>
                    <th
                      align="right"
                      style="color: #555; border-bottom: 1px solid #e0e0e0"
                    >
                      Size
                    </th>
                  </tr>
                 {{topProcesses}}
                </table>

                <div
                  style="
                    background-color: #fff9f9;
                    border-left: 4px solid #d9534f;
                    padding: 15px;
                    margin-bottom: 25px;
                  "
                >
                  <p
                    style="
                      color: #333333;
                      font-size: 14px;
                      line-height: 1.5;
                      font-family: Helvetica, Arial, sans-serif;
                      margin-top: 0;
                    "
                  >
                    <strong>Notes:</strong><br />
                    This spike is above known deviation across a regular: {{timeRange}} timespan.<br />
                    Server usage has exceeded normal patterns:
                    <ul>
                      <li><small>CPU: {{cpuExpected}}</small></li>
                      <li><small>RAM: {{ramExpected}}</small></li>
                    </ul>
                    <span style="font-size: 13px; color: #666"
                      >This alert helps you take early action before potential
                      application issues.</span
                    >
                  </p>
                </div>

                <p
                  style="
                    color: #333333;
                    font-size: 14px;
                    line-height: 1.5;
                    font-family: Helvetica, Arial, sans-serif;
                    margin-bottom: 10px;
                  "
                >
                  <strong>Recommended Actions:</strong>
                </p>
                <ul
                  style="
                    color: #333333;
                    font-size: 14px;
                    line-height: 1.6;
                    font-family: Helvetica, Arial, sans-serif;
                    margin-top: 0;
                    padding-left: 20px;
                  "
                >
                  <li>Investigate the top processes listed above.</li>
                  <li>Check for runaway or stuck processes.</li>
                  <li>Consider scaling resources if this pattern persists.</li>
                  <li>If this spike has already been reviewed and confirmed as normal growth, no immediate action is required.</li>
                </ul>
                <table
                  width="100%"
                  cellpadding="0"
                  cellspacing="0"
                  border="0"
                  style="margin-top: 30px"
                >
                  <tr>
                    <td align="center">
                      <table cellpadding="0" cellspacing="0" border="0">
                        <tr>
                          <td
                            class="button-stack"
                            align="center"
                            style="border-radius: 4px"
                            bgcolor="#333333"
                          >
                            <a
                              href="{{url}}"
                              target="_blank"
                              style="
                                font-size: 14px;
                                font-family: Helvetica, Arial, sans-serif;
                                color: #ffffff;
                                text-decoration: none;
                                padding: 12px 24px;
                                border: 1px solid #333333;
                                display: inline-block;
                                border-radius: 4px;
                                font-weight: bold;
                              "
                              >View Live Metrics</a
                            >
                          </td>
                          <td width="20" class="spacer-cell">&nbsp;</td>
                          <td
                            class="button-stack"
                            align="center"
                            style="border-radius: 4px"
                            bgcolor="#ffffff"
                          >
                            <a
                              href="{{url}}"
                              target="_blank"
                              style="
                                font-size: 14px;
                                font-family: Helvetica, Arial, sans-serif;
                                color: #333333;
                                text-decoration: none;
                                padding: 12px 24px;
                                border: 1px solid #cccccc;
                                display: inline-block;
                                border-radius: 4px;
                                font-weight: bold;
                              "
                              >Check Logs</a
                            >
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>

                <p
                  style="
                    color: #555555;
                    font-size: 13px;
                    line-height: 1.5;
                    margin-top: 30px;
                    font-family: Helvetica, Arial, sans-serif;
                    border-top: 1px solid #eeeeee;
                    padding-top: 20px;
                  "
                >
                  Stay proactive,<br />
                  <strong>Deployster Monitoring System</strong>
                </p>
              </td>
            </tr>

            <tr>
              <td
                style="
                  background-color: #f8f9fa;
                  padding: 20px;
                  text-align: center;
                  border-top: 1px solid #eeeeee;
                "
              >
                <p
                  style="
                    color: #999999;
                    font-size: 12px;
                    margin: 0;
                    line-height: 1.5;
                    font-family: Helvetica, Arial, sans-serif;
                  "
                >
                  Timestamp: {{timestamp}}<br />
                  &copy; Deployster.io
                </p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
